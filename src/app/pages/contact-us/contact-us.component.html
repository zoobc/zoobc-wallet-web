<div class="feedback-container">
  <h2 class="mat-h2">{{ 'feedback' | translate }}</h2>
  <mat-card>
    <form [formGroup]="contactForm" (ngSubmit)="onSubmit()">
      <!-- Name -->
      <mat-form-field appearance="outline" color="accent">
        <mat-label>{{ 'name' | translate }}</mat-label>
        <input matInput type="text" formControlName="name" />
      </mat-form-field>
      <ng-container *ngIf="nameField.touched">
        <mat-error *ngIf="nameField.hasError('required')">
          {{ 'name is required' | translate }}
        </mat-error>
      </ng-container>

      <!-- Email -->
      <mat-form-field appearance="outline" color="accent">
        <mat-label>{{ 'email' | translate }}</mat-label>
        <input matInput type="email" formControlName="email" />
      </mat-form-field>
      <ng-container *ngIf="emailField.touched">
        <mat-error *ngIf="emailField.hasError('required')">
          {{ 'email is required' | translate }}
        </mat-error>
        <mat-error *ngIf="emailField.hasError('email')">
          {{ 'incorrect email format' | translate }}
        </mat-error>
      </ng-container>

      <!-- Message -->
      <mat-form-field appearance="outline" color="accent">
        <mat-label>{{ 'message' | translate }}</mat-label>
        <textarea matInput formControlName="message" rows="9"></textarea>
      </mat-form-field>
      <ng-container *ngIf="messageField.touched">
        <mat-error *ngIf="messageField.hasError('required')">
          {{ 'message is required' | translate }}
        </mat-error>
      </ng-container>

      <!--File Upload-->
      <div>
        <input
          #fileInput
          type="file"
          (change)="onFileChange($event.target.files)"
          style="display: none"
          multiple
        />
        <button
          mat-flat-button
          color="primary"
          type="button"
          (click)="openFile()"
          [disabled]="isUploadLoading"
        >
          <span *ngIf="isUploadLoading"> <i class="fas fa-circle-notch fa-spin"></i>&nbsp; </span>
          {{ 'add attachment' | translate }}
        </button>
        <span class="mat-body-1" *ngIf="isUploadSuccess" style="color: #4caf50;">
          {{ 'attachment added' | translate }}
        </span>
      </div>
      <br />

      <!-- Send button -->
      <button
        mat-flat-button
        color="primary"
        type="submit"
        [disabled]="contactForm.invalid || isFeedbackLoading"
      >
        <span *ngIf="isFeedbackLoading"> <i class="fas fa-circle-notch fa-spin"></i>&nbsp; </span>
        {{ 'send' | translate }}
      </button>
    </form>
  </mat-card>
</div>
