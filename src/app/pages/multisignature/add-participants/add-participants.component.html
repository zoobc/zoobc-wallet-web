<div class="add-participant-container" *ngIf="!isSendDialog">
  <h2 class="mat-h2 text-center">{{ 'signatures list' | translate }}</h2>
  <form [formGroup]="form">
    <div style="margin-bottom: 16px;">
      <label>{{ 'transaction hash' | translate }}</label>
      <wallet-address [value]="transactionHashField.value"></wallet-address>
    </div>

    <label>{{ 'participants signature' | translate }}</label>
    <div formArrayName="participantsSignature">
      <ng-container *ngFor="let participant of participantsSignatureField.controls; let i = index">
        <div [formGroupName]="i">
          <wallet-address [value]="participantsSignatureField.controls[i].get('address').value">
          </wallet-address>

          <mat-form-field class="block" appearance="outline" color="accent">
            <input
              placeholder="{{ 'signature' | translate }} {{ i + 1 }}"
              formControlName="signature"
              matInput
              type="text"
            />
          </mat-form-field>
          <ng-container *ngIf="participantsSignatureField.controls[i].get('signature').touched">
            <mat-error
              class="margin-error"
              *ngIf="participantsSignatureField.controls[i].get('signature').hasError('required')"
            >
              {{ 'signature is required' | translate }}
            </mat-error>
          </ng-container>
        </div>
      </ng-container>
    </div>
    <br />

    <mat-divider style="margin: 0 -24px 12px;"></mat-divider>
    <mat-checkbox class="checkbox-margin" (click)="toggleGetSignature()">
      {{ 'sign with my signature' | translate }}
    </mat-checkbox>

    <div *ngIf="getSignature" style="margin-top: 16px;">
      <account-selector
        (select)="onSwitchAccount($event)"
        type="normal"
        [addresses]="participants"
        [switchAccount]="true"
        [withBalance]="false"
      ></account-selector>

      <button
        (click)="onAddSignature()"
        [disabled]="transactionHashField.value.length <= 0"
        mat-flat-button
        color="primary"
        type="button"
        class="block small"
        style="margin-top: -8px;"
      >
        {{ 'add my signature' | translate }}
      </button>
    </div>
    <mat-divider style="margin: 12px -24px 0;"></mat-divider>

    <div class="row" style="margin-top: 16px;">
      <div class="col">
        <button (click)="onSave()" mat-flat-button color="primary" class="block" type="button">
          {{ 'save' | translate }}
        </button>
      </div>
      <div class="col">
        <button
          [disabled]="form.invalid"
          (click)="onNext()"
          mat-flat-button
          color="primary"
          type="button"
          class="block"
        >
          {{ 'send' | translate }}
        </button>
      </div>
    </div>
  </form>
</div>

<ng-container *ngIf="isSendDialog">
  <h2 class="mat-h2 text-center">{{ 'send multisignature' | translate }}</h2>
  <app-send-transaction [isPopupDialog]="true"></app-send-transaction>
</ng-container>
