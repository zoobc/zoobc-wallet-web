<div class="multisinature-container">
  <h2 class="mat-h2">{{ 'Multisignature Transaction' | translate }}</h2>
  <mat-card>
    <h4 class="mat-h4 check-title">{{ 'Send Money' | translate }}</h4>
    <p class="check-desciption">
      {{ 'Please select what properties you need to create multisignature transaction' | translate }}
    </p>

    <form [formGroup]="form">
      <div class="row">
        <div class="column-check">
          <mat-checkbox formControlName="transaction">
            {{ 'Create Transaction' | translate }}
            <i
              class="fas fa-info-circle"
              matTooltip="{{ 'Create Transaction' | translate }}"
              matTooltipPosition="above"
            ></i>
          </mat-checkbox>
        </div>
        <div class="column-check">
          <mat-checkbox formControlName="signatures">
            {{ 'Add participants signature' | translate }}
            <i
              class="fas fa-info-circle"
              matTooltip="{{ 'Add participants signature' | translate }}"
              matTooltipPosition="above"
            ></i>
          </mat-checkbox>
        </div>
      </div>
      <div class="text-right" style="margin-top: 16px;">
        <button
          (click)="onNext()"
          mat-flat-button
          color="primary"
          type="button"
          [disabled]="!transactionField.value && !signaturesField.value"
        >
          {{ 'Next' | translate }}
        </button>
      </div>
    </form>
  </mat-card>
  <div class="row" style="margin-top: 16px;">
    <div class="col-6">
      <h2 class="mat-h2">{{ 'Multisignature Drafts' | translate }}</h2>
    </div>
    <div class="col-6 text-right">
      <input
        #fileInput
        type="file"
        (change)="onFileChanged($event)"
        style="display: none"
        accept="application/JSON"
      />
      <button mat-flat-button color="primary" type="button" (click)="openFile()">
        {{ 'Import Draft' | translate }}
      </button>
    </div>
  </div>

  <div class="multisignature-drafts">
    <mat-card style="padding: 0;">
      <ng-container *ngIf="multiSigDrafts">
        <div class="no-content padding" *ngIf="multiSigDrafts.length <= 0">
          <i matPrefix class="fa fa-receipt"></i>
          <span class="message">{{ 'No Draft Record' | translate }}</span>
        </div>
        <div
          [className]="'transaction-item hover'"
          *ngFor="let draft of multiSigDrafts; let i = index"
          (click)="onEditDraft(i)"
        >
          <div class="row">
            <div class="col-12 col-sm-8">
              <div class="id">{{ 'Draft ID' | translate }} . {{ draft.id }}</div>
              <div class="date">{{ getDate(draft.id) | dateAgo }}</div>
              <div class="chips">
                <div class="chip" *ngIf="draft.multisigInfo">{{ 'Multisig Info' | translate }}</div>
                <div class="chip" *ngIf="draft.transaction">{{ 'Transaction' | translate }}</div>
                <div class="chip" *ngIf="draft.signaturesInfo">{{ 'Signatures' | translate }}</div>
              </div>
            </div>
            <div class="col-12 col-sm-4 text-right">
              <div class="amount" *ngIf="draft.transaction">
                - {{ draft.transaction.amount | number: '0.0-2' }} ZBC
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-12 col-sm-9 col-md-10">
              <div class="row">
                <div class="col-12 col-md-6" *ngIf="draft.transaction">
                  <div class="label">{{ 'From' | translate }}</div>
                  <wallet-address [value]="draft.transaction.sender"></wallet-address>
                </div>
                <div class="col-12 col-md-6" *ngIf="draft.transaction">
                  <div class="label">{{ 'To' | translate }}</div>
                  <wallet-address [value]="draft.transaction.recipient"></wallet-address>
                </div>
                <div class="col-12 col-md-6" *ngIf="draft.signaturesInfo">
                  <div class="label">{{ 'Transaction Hash' | translate }}</div>
                  <wallet-address [value]="draft.signaturesInfo.txHash"></wallet-address>
                </div>
                <div class="col-12 col-md-6" *ngIf="draft.signaturesInfo">
                  <div class="signed">
                    <span>{{ 'Signed by' | translate }} </span>
                    <b>
                      <span>{{ draft.signaturesInfo.participants.length }} </span>
                      <span *ngIf="draft.multisigInfo"> of {{ draft.multisigInfo.participants.length }}</span>
                    </b>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12 col-sm-3 col-md-2 right">
              <button
                type="button"
                (click)="onDeleteDraft($event, draft.id)"
                class="btn-delete"
                mat-icon-button
                color="warn"
              >
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>
        </div>
      </ng-container>
    </mat-card>
  </div>
</div>
