<label>{{ 'Fee' | translate }}</label>
<div class="choose-fee">
  <button
    mat-flat-button
    type="button"
    [disabled]="customFee"
    (click)="onFeeChoose(1)"
    [class.fee-choosen]="activeButton === 1"
  >
    <div class="fee-button">
      <div class="label">{{ 'Slow' | translate }}</div>
      <div class="zbc-currency">{{ feeSlow }} ZBC</div>
      <div class="fiat-currency">
        {{ feeSlow * currencyRate.value | number: '0.0-2' }}
        {{ currencyRate.name }}
      </div>
    </div>
  </button>
  <button
    mat-flat-button
    type="button"
    [disabled]="customFee"
    (click)="onFeeChoose(2)"
    [class.fee-choosen]="activeButton === 2"
  >
    <div class="fee-button">
      <div class="label">{{ 'Average' | translate }}</div>
      <div class="zbc-currency">{{ feeMedium }} ZBC</div>
      <div class="fiat-currency">
        {{ feeMedium * currencyRate.value | number: '0.0-2' }}
        {{ currencyRate.name }}
      </div>
    </div>
  </button>
  <button
    mat-flat-button
    type="button"
    [disabled]="customFee"
    (click)="onFeeChoose(3)"
    [class.fee-choosen]="activeButton === 3"
  >
    <div class="fee-button">
      <div class="label">{{ 'Fast' | translate }}</div>
      <div class="zbc-currency">{{ feeFast }} ZBC</div>
      <div class="fiat-currency">
        {{ feeFast * currencyRate.value | number: '0.0-2' }}
        {{ currencyRate.name }}
      </div>
    </div>
  </button>
</div>
<div style="margin-bottom: 8px;">
  <mat-checkbox class="checkbox-margin" (click)="toggleCustomFee()">
    {{ 'Custom Fee' | translate }}
  </mat-checkbox>
</div>

<div class="zbc-form-item" *ngIf="customFee">
  <div class="amount text-right">
    <div class="primary-amount">{{ feeForm.value | number: '0.0-8' }} ZBC</div>
    <div class="secondary-amount">
      {{ feeFormCurr.value | number: '0.0-2' }} {{ currencyRate.name }}
    </div>
  </div>
  <label>{{ 'Custom Fee' | translate }}</label>
  <div [formGroup]="formSend">
    <div class="row">
      <div class="col-4 col-sm-3">
        <mat-form-field appearance="outline" color="accent" class="block">
          <mat-select [(value)]="typeFee">
            <mat-option value="ZBC">ZBC</mat-option>
            <mat-option value="Fiat">{{ currencyRate.name }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-8 col-sm-9">
        <mat-form-field
          appearance="outline"
          class="block"
          *ngIf="typeFee === 'ZBC'"
          color="accent"
        >
          <input
            matInput
            type="number"
            formControlName="fee"
            placeholder="{{ 'Fee' | translate }}"
            (input)="onChangeFee($event.target.value)"
            (keyup)="onChangeFee($event.target.value)"
          />
        </mat-form-field>
        <ng-container *ngIf="feeForm.touched && typeFee === 'ZBC'">
          <mat-error *ngIf="feeForm.hasError('required')">
            {{ 'Fee is required' | translate }}
          </mat-error>
          <mat-error *ngIf="feeForm.hasError('min')">
            {{ 'Minimum fee is' | translate: { val: feeSlow } }}
          </mat-error>
        </ng-container>
        <mat-form-field
          appearance="outline"
          class="block"
          *ngIf="typeFee === 'Fiat'"
          color="accent"
        >
          <input
            matInput
            type="number"
            formControlName="feeCurr"
            placeholder="{{ 'Fee' | translate }}"
            (change)="onChangeFeeCurr($event.target.value)"
            (keyup)="onChangeFeeCurr($event.target.value)"
          />
        </mat-form-field>
        <ng-container *ngIf="feeFormCurr.touched && typeFee === 'Fiat'">
          <mat-error *ngIf="feeFormCurr.hasError('required')">
            {{ 'Fee is required' | translate }}
          </mat-error>
          <mat-error *ngIf="feeFormCurr.hasError('min')">
            {{
              'Minimum amount of fee in ZBC must be ZBC'
                | translate: { val: feeSlow }
            }}
          </mat-error>
        </ng-container>
      </div>
    </div>
  </div>
</div>
