<div class="multisig-list-container">
  <ng-container *ngIf="pendingListMultiSig">
    <div class="no-content padding" *ngIf="pendingListMultiSig.length <= 0">
      <i matPrefix class="fa fa-receipt"></i>
      <span class="message">{{ 'no pending multisignature transaction' | translate }}</span>
    </div>
    <div
      [className]="withDetail ? 'multisig-transaction-item hover row' : 'multisig-transaction-item hover'"
      *ngFor="let multisig of pendingListMultiSig; let i = index"
      (click)="openDetailMultiSignature(multisig.transactionhash)"
    >
      <div class="col-12 col-sm-8">
        <div class="alias" *ngIf="multisig.alias">{{ multisig.alias }}</div>
        <div class="address">
          <wallet-address [value]="multisig.senderaddress"></wallet-address>
        </div>
        <div class="date">
          {{ multisig.timestamp * 1000 | dateAgo }}
        </div>
      </div>
      <div class="col-12 col-sm-4 text-right">
        <div class="amount">- {{ multisig.amount / 1e8 | number: '0.0-8' }} ZBC</div>
        <div class="fee">- {{ multisig.fee / 1e8 | number: '0.0-8' }} ZBC</div>
      </div>
    </div>
  </ng-container>

  <ng-container *ngIf="isLoading">
    <div class="multisig-transaction-item row skeleton" *ngFor="let i of [0, 1, 2, 3, 4, 5]">
      <div class="col-7 col-sm-8">
        <div class="skeleton-text" style="width:50%;"></div>
        <div class="skeleton-text small" style="width:75%;"></div>
        <div class="skeleton-text small" style="width:25%;"></div>
      </div>
      <div class="col-5 col-sm-4">
        <div class="skeleton-text" style="width:71%;float:right"></div>
        <div class="skeleton-text small" style="width:80%;float:right"></div>
      </div>
    </div>
  </ng-container>

  <div class="no-content padding" *ngIf="isError">
    <i matPrefix class="fa fa-exclamation-triangle"></i>
    <span class="message">
      {{ 'an error occurred while processing your request' | translate }}
    </span>
    <button mat-flat-button color="primary" (click)="onRefresh()">
      {{ 'try again' | translate }}
    </button>
  </div>
</div>

<ng-template #detailMultisig>
  <div class="detail-multisig-container" *ngIf="multiSigDetail && !isLoadingDetail">
    <div class="row">
      <div class="col-12 col-md-4">{{ 'sender' | translate }}:</div>
      <div class="col-12 col-md-8">
        <wallet-address [value]="multiSigDetail.senderaddress"></wallet-address>
      </div>
    </div>
    <div class="row">
      <div class="col-12 col-md-4">{{ 'recipient' | translate }}:</div>
      <div class="col-12 col-md-8">
        <wallet-address [value]="multiSigDetail.recipientaddress"></wallet-address>
      </div>
    </div>
    <div class="row">
      <div class="col-12 col-md-4">{{ 'amount' | translate }}:</div>
      <div class="col-12 col-md-8">{{ multiSigDetail.amount / 1e8 | number: '0.0-8' }} ZBC</div>
    </div>
    <div class="row">
      <div class="col-12 col-md-4">{{ 'fee' | translate }}:</div>
      <div class="col-12 col-md-8">{{ multiSigDetail.fee / 1e8 | number: '0.0-8' }} ZBC</div>
    </div>
    <div class="row">
      <div class="col-12 col-md-4">{{ 'blockheight' | translate }}:</div>
      <div class="col-12 col-md-8">{{ multiSigDetail.blockheight }}</div>
    </div>
    <div class="row">
      <div class="col-12 col-md-4">{{ 'date' | translate }}:</div>
      <div class="col-12 col-md-8">{{ multiSigDetail.timestamp * 1000 | date: 'medium' }}</div>
    </div>
    <div class="row">
      <div class="col-6 col-md-6" style="margin: 16px 0 16px;">
        <ng-container *ngIf="enabledSign">
          <mat-checkbox (click)="toogleShowSignForm($event)">
            {{ 'sign this transaction' || translate }}
          </mat-checkbox>
        </ng-container>
      </div>
      <div class="col-6 col-md-6 text-right participant-info" style="margin: 16px 0 16px;">
        <ng-container *ngIf="pendingSignatures.length == 0">
          {{ 'no participants have signed yet' || translate }}
        </ng-container>
        <ng-container *ngIf="pendingSignatures.length > 0">
          {{
            'signed by' | translate: { pendingSign: pendingSignatures.length, totalSign: participants.length }
          }}
        </ng-container>
      </div>
    </div>
    <ng-container *ngIf="showSignForm">
      <div class="row">
        <div class="col-12 col-md-10 offset-md-1">
          <fee-selector
            [group]="form"
            feeName="fee"
            feeCurrName="feeCurr"
            [minFee]="minFee"
            [timeoutField]="timeoutField.value"
            [required]="true"
            [currencyRate]="currencyRate"
            (onClickFeeChoose)="onClickFeeChoose($event)"
            [typeFees]="typeFee"
            [customFeeValue]="customFeeValues"
          >
          </fee-selector>
        </div>
      </div>
      <div class="text-right" style="margin-top: 8px">
        <button
          [disabled]="isLoadingTx"
          mat-flat-button
          color="warn"
          style="margin-right: 8px"
          (click)="onIgnore()"
        >
          {{ 'ignore' | translate }}
        </button>
        <button [disabled]="isLoadingTx || !form.valid" mat-flat-button color="primary" (click)="onAccept()">
          {{ 'accept' | translate }}
        </button>
      </div>
    </ng-container>
  </div>
  <div class="detail-multisig-container skeleton" *ngIf="isLoadingDetail">
    <div class="row">
      <div class="col-12 col-md-4">
        <div class="skeleton-text" style="width:20%;"></div>
      </div>
      <div class="col-12 col-md-8">
        <div class="skeleton-text" style="width:50%;"></div>
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-md-4">
        <div class="skeleton-text" style="width:50%;"></div>
      </div>
      <div class="col-12 col-md-8">
        <div class="skeleton-text" style="width:100%;"></div>
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-md-4">
        <div class="skeleton-text" style="width:30%;"></div>
      </div>
      <div class="col-12 col-md-8">
        <div class="skeleton-text" style="width:30%;"></div>
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-md-4">
        <div class="skeleton-text" style="width:50%;"></div>
      </div>
      <div class="col-12 col-md-8">
        <div class="skeleton-text" style="width:30%;"></div>
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-md-4">
        <div class="skeleton-text" style="width:70%;"></div>
      </div>
      <div class="col-12 col-md-8">
        <div class="skeleton-text" style="width:40%;"></div>
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-md-4">
        <div class="skeleton-text" style="width:40%;"></div>
      </div>
      <div class="col-12 col-md-8">
        <div class="skeleton-text" style="width:100%;"></div>
      </div>
    </div>
  </div>
</ng-template>
